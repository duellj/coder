<?php
// $Id: coder.module,v 1.97 2009-06-12 21:00:15 snpower Exp $

/**
 * @file
 * Installation file for the coder module.
 */

function coder_menu() {
  $items = array();

  if (!module_exists('coder_review') && !module_exists('coder_upgrade')) {
    $items['admin/settings/coder'] = array(
      'title' => 'Coder',
      'page callback' => 'coder_display_required_module_message',
      'description' => 'Select code review plugins and modules, and upgrade directories.',
      'access arguments' => array('administer site configuration'),
    );

    $items['admin/development/coder'] = array(
      'title' => 'Coder',
      'page callback' => 'coder_display_required_module_message',
      'description' => 'Select code review plugins and modules, and upgrade files.',
      'access arguments' => array('administer site configuration'),
    );
  }
  else {
    $items['admin/settings/coder'] = array(
      'title' => 'Coder',
      'description' => 'Select code review plugins and modules, and upgrade directories.',
      'access arguments' => array('administer site configuration'),
    );

    $items['admin/development/coder'] = array(
      'title' => 'Coder',
      'description' => 'Select code review plugins and modules, and upgrade files.',
      'access arguments' => array('administer site configuration'),
    );
  }

  return $items;
}

function coder_display_required_module_message() {
  $message = t('Please enable the "coder review" or "coder upgrade" module.');
  $build['coder_message'] = array(
    '#markup' => $message,
  );

  return $build;
}
